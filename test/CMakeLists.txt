# test/CMakeLists.txt â€” Build and run CppUTest-based unit tests
file(GLOB TEST_SOURCES "*.cpp")

add_executable(PiscoCodeTests ${TEST_SOURCES})

target_include_directories(PiscoCodeTests PRIVATE
    ${CMAKE_SOURCE_DIR}/include
    ${CMAKE_SOURCE_DIR}/src
    ${CMAKE_SOURCE_DIR}/external/CppUTest/include
    ${CMAKE_SOURCE_DIR}/external/CppUTest/include/Platforms
)

target_link_libraries(PiscoCodeTests
    PiscoCodeCore        # Replace with your actual library target from src/
    CppUTest
    CppUTestExt
)

add_test(NAME PiscoCodeTests COMMAND PiscoCodeTests)
